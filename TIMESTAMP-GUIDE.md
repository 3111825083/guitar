# ⏱️ 时间戳录制功能使用指南

## 如何使用时间戳录制功能

### 步骤 1：进入全屏模式
1. 进入任一谱子详情页
2. 点击"**全屏查看**"按钮
3. 看到谱子占满整个屏幕

### 步骤 2：开始录制
在全屏模式下，工具栏显示：
- 🔵 **自动滚动** - 播放已有的滚动配置
- 🔵 **录制时间戳** - 开始录制时间戳（蓝色十字图标）

点击"**录制时间戳**"按钮开始录制：
- 按钮变蓝，显示"⏹ 停止录制"
- 光标变为十字准星（✕）
- 右侧显示"已记录: 0 个"

### 步骤 3：逐次添加时间戳

在谱子图片上**点击**想要标记的位置：

**第一次点击**：
- 弹出对话框显示点击的像素位置
- 输入对应的**时间戳**（秒）
  - 例如：`0` （第一张图片顶部）
  - 按 Enter 或点击确定
- 记录计数增加到 "已记录: 1 个"
- 继续可以再点击其他位置

**重复操作**：
- 可以多次点击和输入
- 每次都会累加计数
- 常见配置：
  ```
  第 1 个：time=0s, position=点击第一张图片顶部
  第 2 个：time=5s, position=点击第二张图片顶部  
  第 3 个：time=10s, position=点击第三张图片底部
  ```

### 步骤 4：提交或取消

录制过程中，工具栏显示：
- ✅ **提交** 按钮（绿色）
- ❌ **取消** 按钮（红色）

**点击"提交"**：
- 确认保存所有记录的时间戳
- 弹出最终确认对话框
- 显示所有已记录的时间戳列表
- 点击"确定"保存到配置
- 显示"✅ 时间戳已成功保存!"

**点击"取消"**：
- 放弃本次录制
- 返回到正常模式
- 已记录的数据不保存

### 步骤 5：使用自动滚动

保存后，下次打开同一谱子时：
1. 进入全屏模式
2. 点击"**自动滚动**"按钮（播放图标 ▶️）
3. 谱子会按照保存的时间戳自动滚动
4. 图标变为暂停符号（⏸）
5. 再次点击可暂停或继续

---

## 📊 时间戳配置示例

### 3 页谱子的配置
```
已记录 3 个时间戳:

1. time: 0s, position: 0px      ← 第一页顶部
2. time: 5s, position: 600px    ← 第二页顶部
3. time: 10s, position: 1200px  ← 第三页顶部
```

### 工作原理
- 系统记录**时间**和**位置**的对应关系
- 当自动滚动播放时，会在指定时间滚到指定位置
- 中间会**平滑插值**，不是生硬跳转

---

## 💡 使用技巧

### 快速标记
1. 已知每页图片高度约 600px
2. 每页间隔 5 秒
3. 可以快速计算时间戳：
   - 第 N 页 = time: `(N-1)*5`, position: `(N-1)*600`

### 精确控制
- 输入**小数**时间戳：`2.5` 表示 2.5 秒
- 自定义位置：根据实际图片位置点击

### 修改现有配置
1. 重新进入全屏模式
2. 点击"录制时间戳"
3. 重新录制新的时间戳
4. 提交时会**覆盖**原配置

---

## ⚙️ 两种自动滚动模式

### 模式 1：自定义时间戳（默认）
- 使用你录制的时间戳配置
- 精确到秒
- 中间平滑插值
- **推荐用于**：固定谱子

### 模式 2：匀速滚动
- 恒定速度从头到尾
- 可调整速度（50-500 px/s）
- 简单易用
- **推荐用于**：临时浏览

在全屏"设置"菜单中切换模式

---

## ❓ 常见问题

**Q: 点击后没有弹出对话框？**
A: 确保点击在全屏容器内（不是工具栏）

**Q: 我想修改某个时间戳？**
A: 重新录制整个序列，新的会覆盖旧的

**Q: 时间戳消失了？**
A: 检查备份文件 `tabs-config-backup.json`

**Q: 自动滚动不工作？**
A: 确保已保存时间戳，切换到"自定义时间戳"模式

**Q: 光标不是十字准星？**
A: 浏览器兼容性问题，不影响功能

---

## 🎯 最佳实践

1. **录制前**：预先计划好需要标记的位置
2. **录制中**：逐个点击和输入，保证准确
3. **保存前**：检查记录数量是否正确
4. **测试**：保存后立即测试自动滚动效果
5. **调整**：不满意可重新录制

---

**祝你录制愉快！🎸**
